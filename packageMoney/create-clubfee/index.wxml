<!-- 协会支出创建页面 -->
<view class="clubfee-waterfall-container">
  <!-- 顶部标题 -->
  <view class="page-header">
    <text class="page-title">创建支出</text>
    <text class="club-title" wx:if="{{clubInfo}}">{{clubInfo.name}}</text>
  </view>

  <!-- 瀑布流主体内容 -->
  <scroll-view scroll-y class="waterfall-scroll">
    <!-- 1. 支出基本信息区块 -->
    <view class="waterfall-block">
      <view class="block-header">
        <van-icon name="balance-pay" color="rgb(223, 118, 176)" />
        <text>支出信息</text>
      </view>
      <view class="block-content">
        <!-- 社团选择 -->
        <view class="form-item">
          <text class="form-label required">选择协会</text>
          <van-picker 
            columns="{{ clubColumns }}" 
            title="选择协会"
            default-index="{{ defaultClubIndex }}"
            bind:change="onClubPickerChange"
            value-key="name"
            visible-item-count="{{2}}"
          />
        </view>
        <!-- 支出金额 -->
        <view class="form-item">
          <text class="form-label required">支出金额</text>
          <van-field
            value="{{ formData.feement }}"
            placeholder="请输入支出金额"
            border="{{ false }}"
            bind:change="onInputChange"
            data-field="feement"
            type="digit"
          />
        </view>
        <!-- 支出描述 -->
        <view class="form-item">
          <text class="form-label required">支出描述</text>
          <van-field
            value="{{ formData.description }}"
            placeholder="请输入支出描述"
            border="{{ false }}"
            bind:change="onInputChange"
            data-field="description"
            maxlength="100"
            show-word-limit
          />
        </view>
        <!-- 支出时间 -->
        <view class="form-item">
          <text class="form-label required">支出时间</text>
          <view class="datetime-container">
            <van-datetime-picker
              type="datetime"
              value="{{ currentDate }}"
              min-date="{{ minDate }}"
              max-date="{{ maxDate }}"
              bind:confirm="onDateTimeConfirm"
              bind:cancel="onDateTimeCancel"
              title="请选择支出时间"
              visible-item-count="4"
              show="{{ showDatetimePicker }}"
            />
            <van-cell 
              title="选择日期时间" 
              value="{{ formData.createDate ? formatDate(formData.createDate) : '请选择' }}" 
              bind:click="showDatetimePicker" 
              is-link 
            />
          </view>
        </view>
      </view>
    </view>
    
    <!-- 3. 表单按钮 -->
    <view class="waterfall-block">
      <view class="block-content">
        <view class="action-buttons">
          <van-button 
            round 
            color="rgb(153, 153, 153)"
            bindtap="cancelCreate" 
            custom-class="primary-btn"
            style="margin-bottom: 20rpx;"
            disabled="{{submitting}}"
          >
            取消
          </van-button>
          <van-button 
            round 
            color="rgb(223, 118, 176)"
            bindtap="submitForm" 
            custom-class="primary-btn"
            loading="{{submitting}}"
          >
            创建支出
          </van-button>
        </view>
      </view>
    </view>
    
    <!-- 底部填充 -->
    <view class="footer-space"></view>
  </scroll-view>
</view>

<tabBar id="vant-tabbar" active="{{1}}"></tabBar> 