<!--pages/home/notifications/index.wxml-->
<view class="container">
  <!-- 标签页 -->
  <!-- 总体加载中 -->
  <view class="loading-container" wx:if="{{loading_messages}}">
    <van-loading color="#1989fa" size="24px" />
    <text class="loading-text">加载中...</text>
  </view>
  <van-tabs active="{{ activeTab }}" bind:change="onTabChange" swipeable animated wx:else>
    <!-- 协会通知标签页 -->
    <van-tab title="协会通知">
      <view class="tab-content">
        <!-- 空状态 -->
        <view class="empty-container" wx:if="{{emptyClubNotices}}">
          <van-empty description="暂无协会通知" />
        </view>
        
        <!-- 通知列表 -->
        <view class="notice-list" wx:else>
          <view class="notice-item {{!item.readDate ? 'unread' : ''}}" 
                wx:for="{{clubNotices}}" 
                wx:key="id" 
                bindtap="viewMessageDetail" 
                data-message_id="{{item.message_id}}" 
                data-url="{{item.url}}" 
                data-type="club">
            <view class="notice-icon">
              <view class="icon-bg club-icon">
                <van-icon name="cluster-o" color="#fff" size="20px" />
              </view>
              <view class="unread-dot" wx:if="{{!item.readDate}}"></view>
            </view>
            <view class="notice-content">
              <view class="notice-title">{{item.title}}</view>
              <view class="notice-desc">{{item.content}}</view>
              <view class="notice-time">{{item.created_time}}</view>
            </view>
          </view>
        </view>
      </view>
    </van-tab>
    
    <!-- 活动通知标签页 -->
    <van-tab title="活动通知">
      <view class="tab-content">
        <!-- 空状态 -->
        <view class="empty-container" wx:if="{{emptyEventNotices}}">
          <van-empty description="暂无活动通知" />
        </view>
        
        <!-- 通知列表 -->
        <view class="notice-list" wx:else>
          <view class="notice-item {{!item.readDate ? 'unread' : ''}}" 
                wx:for="{{eventNotices}}" 
                wx:key="id" 
                bindtap="viewMessageDetail" 
                data-message_id="{{item.message_id}}" 
                data-url="{{item.url}}" 
                data-type="event">
            <view class="notice-icon">
              <view class="icon-bg event-icon">
                <van-icon name="calendar-o" color="#fff" size="20px" />
              </view>
              <view class="unread-dot" wx:if="{{!item.readDate}}"></view>
            </view>
            <view class="notice-content">
              <view class="notice-title">{{item.title}}</view>
              <view class="notice-desc">{{item.content}}</view>
              <view class="notice-time">{{item.created_time}}</view>
            </view>
          </view>
        </view>
      </view>
    </van-tab>
    
    <!-- 系统通知标签页 -->
    <van-tab title="系统通知">
      <view class="tab-content">
        <!-- 空状态 -->
        <view class="empty-container" wx:if="{{emptySystemNotices}}">
          <van-empty description="暂无系统通知" />
        </view>
        
        <!-- 通知列表 -->
        <view class="notice-list" wx:else>
          <view class="notice-item {{!item.readDate ? 'unread' : ''}}" 
                wx:for="{{systemNotices}}" 
                wx:key="id" 
                bindtap="viewMessageDetail" 
                data-message_id="{{item.message_id}}" 
                 data-url="{{item.url}}" 
                data-type="system">
            <view class="notice-icon">
              <view class="icon-bg system-icon">
                <van-icon name="info-o" color="#fff" size="20px" />
              </view>
              <view class="unread-dot" wx:if="{{!item.readDate}}"></view>
            </view>
            <view class="notice-content">
              <view class="notice-title">{{item.title}}</view>
              <view class="notice-desc">{{item.content}}</view>
              <view class="notice-time">{{item.created_time}}</view>
            </view>
          </view>
        </view>
      </view>
    </van-tab>
  </van-tabs>
</view> 