<!--pages/profile/settings/index.wxml-->
<view class="container">
  <view class="page-header">
    <view class="title">设置</view>
  </view>
  
  <view class="settings-list">
    <view class="settings-group">
      <view class="settings-title">账号设置</view>
      <navigator url="/pages/profile/edit/index" class="settings-item" hover-class="item-hover">
        <view class="item-content">
          <image src="/assets/images/user-edit.png" class="item-icon"></image>
          <text class="item-label">编辑个人信息</text>
        </view>
        <view class="item-arrow">
          <image src="/assets/images/arrow-right.png"></image>
        </view>
      </navigator>
      
      <view class="settings-item" bindtap="showChangePassword" hover-class="item-hover">
        <view class="item-content">
          <image src="/assets/images/password.png" class="item-icon"></image>
          <text class="item-label">修改密码</text>
        </view>
        <view class="item-arrow">
          <image src="/assets/images/arrow-right.png"></image>
        </view>
      </view>
    </view>
    
    <view class="settings-group">
      <view class="settings-title">消息设置</view>
      <view class="settings-item">
        <view class="item-content">
          <image src="/assets/images/notification.png" class="item-icon"></image>
          <text class="item-label">通知提醒</text>
        </view>
        <switch checked="{{notificationSettings.enabled}}" bindchange="onSwitchChange" data-type="enabled" color="#1890ff"></switch>
      </view>
      
      <view class="settings-item" wx:if="{{notificationSettings.enabled}}">
        <view class="item-content">
          <image src="/assets/images/sound.png" class="item-icon"></image>
          <text class="item-label">声音</text>
        </view>
        <switch checked="{{notificationSettings.sound}}" bindchange="onSwitchChange" data-type="sound" color="#1890ff"></switch>
      </view>
      
      <view class="settings-item" wx:if="{{notificationSettings.enabled}}">
        <view class="item-content">
          <image src="/assets/images/vibrate.png" class="item-icon"></image>
          <text class="item-label">震动</text>
        </view>
        <switch checked="{{notificationSettings.vibrate}}" bindchange="onSwitchChange" data-type="vibrate" color="#1890ff"></switch>
      </view>
    </view>
    
    <view class="settings-group">
      <view class="settings-title">其他设置</view>
      <view class="settings-item" bindtap="clearCache" hover-class="item-hover">
        <view class="item-content">
          <image src="/assets/images/clear.png" class="item-icon"></image>
          <text class="item-label">清除缓存</text>
        </view>
        <view class="item-extra">{{cacheSize}}</view>
      </view>
      
      <navigator url="/pages/profile/about/index" class="settings-item" hover-class="item-hover">
        <view class="item-content">
          <image src="/assets/images/about.png" class="item-icon"></image>
          <text class="item-label">关于我们</text>
        </view>
        <view class="item-arrow">
          <image src="/assets/images/arrow-right.png"></image>
        </view>
      </navigator>
    </view>
    
    <view class="settings-group">
      <button class="logout-button" bindtap="showLogoutConfirm">退出登录</button>
    </view>
  </view>
</view>

<!-- 修改密码弹窗 -->
<view class="modal-mask" bindtap="hideChangePassword" wx:if="{{showPasswordModal}}"></view>
<view class="modal-dialog" wx:if="{{showPasswordModal}}">
  <view class="modal-header">
    <text class="modal-title">修改密码</text>
    <view class="modal-close" bindtap="hideChangePassword">
      <image src="/assets/images/close.png"></image>
    </view>
  </view>
  <view class="modal-content">
    <view class="input-group">
      <view class="input-label">当前密码</view>
      <input type="password" placeholder="请输入当前密码" bindinput="inputPassword" data-field="currentPassword" value="{{passwordForm.currentPassword}}"></input>
    </view>
    <view class="input-group">
      <view class="input-label">新密码</view>
      <input type="password" placeholder="请输入新密码" bindinput="inputPassword" data-field="newPassword" value="{{passwordForm.newPassword}}"></input>
    </view>
    <view class="input-group">
      <view class="input-label">确认新密码</view>
      <input type="password" placeholder="请再次输入新密码" bindinput="inputPassword" data-field="confirmPassword" value="{{passwordForm.confirmPassword}}"></input>
    </view>
  </view>
  <view class="modal-footer">
    <view class="modal-button cancel" bindtap="hideChangePassword">取消</view>
    <view class="modal-button confirm" bindtap="changePassword">确认</view>
  </view>
</view> 